{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL =\n  'https://pixabay.com/api/?key=42472719-86e9d77d864a652d5db1b513d';\n\nexport async function getDataApi(currentPage, searchWord) {\n  const response = await axios.get('', {\n    params: {\n      q: searchWord,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\nconst gallery = document.querySelector('.gallery');\n\nexport function createMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    \t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n    \t\t<img\n    \t\t\tclass=\"gallery-image\"\n    \t\t\tsrc=\"${webformatURL}\"\n    \t\t\talt=\"${tags}\"\n    \t\t\t/>\n    \t</a>\n        <div class=\"stats-box\">\n      <ul class=\"img-stats\">\n         <li>\n            <p>Likes</p>\n            <p>${likes}</p>\n          </li>\n          <li>\n            <p>Views</p>\n            <p>${views}</p>\n          </li>\n          <li>\n            <p>Comments</p>\n            <p>${comments}</p>\n          </li>\n          <li>\n            <p>Downloads</p>\n            <p>${downloads}</p>\n          </li>\n      </ul>\n    </div>\n    </li>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import { getDataApi } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst secondLoader = document.querySelector('.second-loader');\nconst buttonLoadMore = document.querySelector('.load-more-button');\nconst gallery = document.querySelector('.gallery');\n\nlet currentPage;\nlet formValue;\nlet counter;\nlet searchWord;\n\nform.addEventListener('submit', onSubmit);\nasync function onSubmit(event) {\n  event.preventDefault();\n  buttonLoadMore.style.display = 'none';\n\n  formValue = form.inputForm.value.trim();\n  searchWord = formValue;\n  gallery.innerHTML = '';\n\n  if (formValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'field cannot be empty',\n    });\n    return;\n  }\n  loader.style.display = 'block';\n  currentPage = 1;\n  try {\n    const response = await getDataApi(currentPage, searchWord);\n    if (response.hits.length === 0) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      loader.style.display = 'none';\n      createMarkup(response.hits);\n      counter = 15;\n      buttonLoadMore.style.display = 'block';\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nbuttonLoadMore.addEventListener('click', loadMore);\n\nasync function loadMore() {\n  secondLoader.style.display = 'block';\n  currentPage++;\n  counter += 15;\n  try {\n    const response = await getDataApi(currentPage, formValue);\n    createMarkup(response.hits);\n\n    if (response.totalHits >= 14) {\n      const domRect =\n        gallery.children[gallery.children.length - 14].getBoundingClientRect();\n      window.scrollBy({\n        top: domRect.y,\n        left: domRect.x,\n        behavior: 'smooth',\n      });\n    }\n\n    secondLoader.style.display = 'none';\n    if (counter >= response.totalHits) {\n      buttonLoadMore.style.display = 'none';\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["axios","getDataApi","currentPage","searchWord","lightbox","SimpleLightbox","gallery","createMarkup","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","loader","secondLoader","buttonLoadMore","formValue","counter","onSubmit","event","iziToast","response","error","loadMore","domRect"],"mappings":"owBAEAA,EAAM,SAAS,QACb,kEAEK,eAAeC,EAAWC,EAAaC,EAAY,CAWxD,OAViB,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMD,CACP,CACL,CAAG,GACe,IAClB,CCdA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,KAChB,CAAC,EACKC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,qCACyBN,CAAa;AAAA;AAAA;AAAA,cAGpCC,CAAY;AAAA,cACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAODC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAMrB,EACA,KAAK,EAAE,EACVV,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CL,EAAS,QAAO,CAClB,CC9CA,MAAMa,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAiB,SAAS,cAAc,mBAAmB,EAC3Dd,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIJ,EACAmB,EACAC,EACAnB,EAEJc,EAAK,iBAAiB,SAAUM,CAAQ,EACxC,eAAeA,EAASC,EAAO,CAQ7B,GAPAA,EAAM,eAAc,EACpBJ,EAAe,MAAM,QAAU,OAE/BC,EAAYJ,EAAK,UAAU,MAAM,KAAI,EACrCd,EAAakB,EACbf,EAAQ,UAAY,GAEhBe,IAAc,GAAI,CACpBI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uBACf,CAAK,EACD,MACD,CACDP,EAAO,MAAM,QAAU,QACvBhB,EAAc,EACd,GAAI,CACF,MAAMwB,EAAW,MAAMzB,EAAWC,EAAaC,CAAU,EACrDuB,EAAS,KAAK,SAAW,GAC3BR,EAAO,MAAM,QAAU,OACvBO,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,IAEDP,EAAO,MAAM,QAAU,OACvBX,EAAamB,EAAS,IAAI,EAC1BJ,EAAU,GACVF,EAAe,MAAM,QAAU,QAElC,OAAQO,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAP,EAAe,iBAAiB,QAASQ,CAAQ,EAEjD,eAAeA,GAAW,CACxBT,EAAa,MAAM,QAAU,QAC7BjB,IACAoB,GAAW,GACX,GAAI,CACF,MAAMI,EAAW,MAAMzB,EAAWC,EAAamB,CAAS,EAGxD,GAFAd,EAAamB,EAAS,IAAI,EAEtBA,EAAS,WAAa,GAAI,CAC5B,MAAMG,EACJvB,EAAQ,SAASA,EAAQ,SAAS,OAAS,EAAE,EAAE,wBACjD,OAAO,SAAS,CACd,IAAKuB,EAAQ,EACb,KAAMA,EAAQ,EACd,SAAU,QAClB,CAAO,CACF,CAEDV,EAAa,MAAM,QAAU,OACzBG,GAAWI,EAAS,YACtBN,EAAe,MAAM,QAAU,OAC/BK,EAAS,KAAK,CACZ,QACE,+DACV,CAAO,EAEJ,OAAQE,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH"}