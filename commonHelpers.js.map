{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst form = document.querySelector('.search-form');\n\nexport async function getDataApi(currentPage, formValue) {\n  if (formValue !== '') {\n    const searchWord = formValue;\n    axios.defaults.baseURL =\n      'https://pixabay.com/api/?key=42472719-86e9d77d864a652d5db1b513d';\n    try {\n      const response = await axios.get('', {\n        params: {\n          q: searchWord,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: 15,\n          page: currentPage,\n        },\n      });\n      form.reset();\n      return response.data;\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\n\nconst loader = document.querySelector('.loader');\n\nexport function createMarkup(images) {\n  const gallery = document.querySelector('.gallery');\n\n  loader.style.display = 'none';\n\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    \t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n    \t\t<img\n    \t\t\tclass=\"gallery-image\"\n    \t\t\tsrc=\"${webformatURL}\"\n    \t\t\talt=\"${tags}\"\n    \t\t\t/>\n    \t</a>\n        <div class=\"stats-box\">\n      <ul class=\"img-stats\">\n         <li>\n            <p>Likes</p>\n            <p>${likes}</p>\n          </li>\n          <li>\n            <p>Views</p>\n            <p>${views}</p>\n          </li>\n          <li>\n            <p>Comments</p>\n            <p>${comments}</p>\n          </li>\n          <li>\n            <p>Downloads</p>\n            <p>${downloads}</p>\n          </li>\n      </ul>\n    </div>\n    </li>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import { getDataApi } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst secondLoader = document.querySelector('.second-loader');\nconst buttonLoadMore = document.querySelector('.load-more-button');\nconst gallery = document.querySelector('.gallery');\nlet currentPage;\nlet formValue;\nlet counter;\n\nform.addEventListener('submit', onSubmit);\nfunction onSubmit(event) {\n  event.preventDefault();\n  buttonLoadMore.style.display = 'none';\n\n  formValue = form.inputForm.value.trim();\n\n  gallery.innerHTML = '';\n\n  if (form.inputForm.value !== '') {\n    loader.style.display = 'block';\n    currentPage = 1;\n    getDataApi(currentPage, formValue)\n      .then(images => {\n        if (images.hits.length === 0) {\n          iziToast.error({\n            title: 'Error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n        createMarkup(images.hits);\n\n        counter = 15;\n        buttonLoadMore.style.display = 'block';\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'field cannot be empty',\n    });\n  }\n}\n\nbuttonLoadMore.addEventListener('click', LoadMore);\n\nfunction LoadMore() {\n  secondLoader.style.display = 'block';\n  currentPage++;\n  counter += 15;\n  getDataApi(currentPage, formValue).then(images => {\n    createMarkup(images.hits);\n    const domRect =\n      gallery.children[gallery.children.length - 14].getBoundingClientRect();\n\n    window.scrollBy({\n      top: domRect.y,\n      left: domRect.x,\n      behavior: 'smooth',\n    });\n\n    secondLoader.style.display = 'none';\n    if (counter >= images.totalHits) {\n      buttonLoadMore.style.display = 'none';\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n    }\n  });\n}\n"],"names":["form","getDataApi","currentPage","formValue","searchWord","axios","response","error","lightbox","SimpleLightbox","loader","createMarkup","images","gallery","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","secondLoader","buttonLoadMore","counter","onSubmit","event","iziToast","LoadMore","domRect"],"mappings":"owBAEA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAE3C,eAAeC,EAAWC,EAAaC,EAAW,CACvD,GAAIA,IAAc,GAAI,CACpB,MAAMC,EAAaD,EACnBE,EAAM,SAAS,QACb,kEACF,GAAI,CACF,MAAMC,EAAW,MAAMD,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMF,CACP,CACT,CAAO,EACDF,OAAAA,EAAK,MAAK,EACHM,EAAS,IACjB,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACF,CACH,CCrBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,KAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,SAAS,EAExC,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjDH,EAAO,MAAM,QAAU,OAEvB,MAAMI,EAASF,EACZ,IACC,CAAC,CACC,cAAAG,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,qCACyBN,CAAa;AAAA;AAAA;AAAA,cAGpCC,CAAY;AAAA,cACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAODC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAMrB,EACA,KAAK,EAAE,EACVR,EAAQ,mBAAmB,YAAaC,CAAM,EAC9CN,EAAS,QAAO,CAClB,CCnDA,MAAMR,EAAO,SAAS,cAAc,cAAc,EAC5CU,EAAS,SAAS,cAAc,SAAS,EACzCY,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DV,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIX,EACAC,EACAqB,EAEJxB,EAAK,iBAAiB,SAAUyB,CAAQ,EACxC,SAASA,EAASC,EAAO,CACvBA,EAAM,eAAc,EACpBH,EAAe,MAAM,QAAU,OAE/BpB,EAAYH,EAAK,UAAU,MAAM,KAAI,EAErCa,EAAQ,UAAY,GAEhBb,EAAK,UAAU,QAAU,IAC3BU,EAAO,MAAM,QAAU,QACvBR,EAAc,EACdD,EAAWC,EAAaC,CAAS,EAC9B,KAAKS,GAAU,CACVA,EAAO,KAAK,SAAW,GACzBe,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACd,CAAW,EAEHhB,EAAaC,EAAO,IAAI,EAExBY,EAAU,GACVD,EAAe,MAAM,QAAU,OACvC,CAAO,EACA,MAAMhB,GAAS,CACd,QAAQ,MAAMA,CAAK,CAC3B,CAAO,GAEHoB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uBACf,CAAK,CAEL,CAEAJ,EAAe,iBAAiB,QAASK,CAAQ,EAEjD,SAASA,GAAW,CAClBN,EAAa,MAAM,QAAU,QAC7BpB,IACAsB,GAAW,GACXvB,EAAWC,EAAaC,CAAS,EAAE,KAAKS,GAAU,CAChDD,EAAaC,EAAO,IAAI,EACxB,MAAMiB,EACJhB,EAAQ,SAASA,EAAQ,SAAS,OAAS,EAAE,EAAE,wBAEjD,OAAO,SAAS,CACd,IAAKgB,EAAQ,EACb,KAAMA,EAAQ,EACd,SAAU,QAChB,CAAK,EAEDP,EAAa,MAAM,QAAU,OACzBE,GAAWZ,EAAO,YACpBW,EAAe,MAAM,QAAU,OAC/BI,EAAS,KAAK,CACZ,QACE,+DACV,CAAO,EAEP,CAAG,CACH"}